<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>Geolocalizaci&oacute;n</title>
   <link rel="stylesheet" href="./css/style.css">
   <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBMOupQlnDAwkWiczW6NUXpCWTR9655bEw"></script>
   <script type="text/javascript">
    var mapa = null;
    var mapaMarcador = null;
    function init(){
        navigator.geolocation.watchPosition( mostrarCoordenadas, mostrarErrores, { maximumAge: 1000, timeout: 300000, enableHighAccuracy: true } );
    }

    const mostrarCoordenadas = (posicion) => {
        let latitud = posicion.coords.latitude;
        let longitud = posicion.coords.longitude;
        var gmPosicion = new google.maps.LatLng(latitud,longitud);

        if( mapa == null ){
            let opciones = { center: gmPosicion, zoom: 15, mapTypeId: google.maps.MapTypeId.ROADMAP }
            mapa = new google.maps.Map( document.getElementById('resultado'), opciones );
            mapaMarcador = new google.maps.Marker( { position: gmPosicion, title: 'Estas aquí' } );
            mapaMarcador.setMap( mapa );
        }else{
            mapa.panTo( gmPosicion );
            mapaMarcador.setPosition( gmPosicion );
        }
    }

    const mostrarErrores = (e) => {
        switch (e.code){
        case e.PERMISSION_DENIED:
            alert('Usuario denegado')
        case e.POSITION:UNAVAILABLE:
            alert('Posición no disponible')
        case e.TIMEOUT:
            alert('Tiempo de espera agotado')
        default:
            alert('Error desconocido')
        }
    }
   </script>
</head>
<body onload="init()">
   <header>
      
   </header>
   <div id="resultado"></div>
</body>
</html>