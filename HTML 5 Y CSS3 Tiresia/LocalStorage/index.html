<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>Local Storage</title>
   <script type="text/javascript">
      
      function init(){
         const lista = document.getElementById('lista');
         lista.onblur = cambioLista;
         document.getElementById('limpiar').onclick = limpiar;

         if( localStorage.getItem('lista') ){
            document.getElementById('mensaje').innerHTML = `<h3>Datos almacenados en local Storage</h3>`;
            lista.innerHTML = localStorage.getItem('lista');
            document.getElementById('resultado').textContent = localStorage.getItem('lista');
         }else{
            document.getElementById('mensaje').textContent = 'No hay datos en local Storage';
         }

         window.addEventListener( "storage", escucharEvento, false );
      }

      const escucharEvento = (e) => {
         alert("Evento generando localStorage" + e.storageArea.lista);
         location.reload();
      }

      const cambioLista = () => {
         console.log(lista.innerHTML);
         localStorage.setItem('lista',lista.innerHTML);
         location.reload();
      }
      
      const limpiar = () => {
         localStorage.removeItem('lista');
         //localStorage.clear();
         location.reload();
      }

   </script>
</head>
<body onload="init()">
   <header>
      <h1>Local Storage</h1>
   </header>
   <div>
      <ul id="lista" contenteditable="true">
         <li>

         </li>
      </ul>
   
   </div>

   <input type="button" id="limpiar" value="Limpiar">
   
   <div id="mensaje">

   </div>

   <div id="resultado">

   </div>
</body>
</html>